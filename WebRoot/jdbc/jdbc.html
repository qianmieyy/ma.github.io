<html>
<head>
  <title>Evernote Export</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/307671 (zh-CN, DDL); Windows/6.3.0 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="2043"/>

<div><span>
  <div>
<div style="font-size: 16px; display: inline-block; min-width: 100%;position: relative;"><div style="box-sizing:border-box;font-family:sans-serif;text-size-adjust:100%;font-size:10px;-webkit-tap-highlight-color:transparent;"><div style="box-sizing:border-box;font-family:-apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif;font-size:14px;line-height:1.42858;color:rgb(51, 51, 51);background-color:rgb(255, 255, 255);-webkit-font-smoothing:antialiased;"><div style="box-sizing:border-box;"><div style="box-sizing:border-box;"><div style="box-sizing:border-box;"><div style="box-sizing:border-box;"><div style="box-sizing:border-box;line-height:1.6;word-wrap:break-word;font-size:15px;font-family:-apple-system, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Source Han Sans SC&quot;, &quot;Noto Sans CJK SC&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif;"><span style="line-height:1.6;font-size:15px;font-family:-apple-system, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Source Han Sans SC&quot;, &quot;Noto Sans CJK SC&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif;display:table;"> </span>
                    
<p style="box-sizing:border-box;margin:1.5em 0px;margin-top:0px;">以下我是归纳的JDBC知识点图：</p>
<p style="box-sizing:border-box;margin:1.5em 0px;"><span style="box-sizing:border-box;display:block;text-align:center;"><img src="jdbc_files/1460000013312769" type="image/png" data-filename="1460000013312769" height="387" style="box-sizing:border-box;vertical-align:middle;border:1px solid rgb(221, 221, 221);max-width:100%;padding:3px;position:static;cursor:pointer;display:inline;" title="" width="800"/></span></p>
<p style="box-sizing:border-box;margin:1.5em 0px;"><strong style="box-sizing:border-box;font-weight:bold;">图上的知识点都可以在我其他的文章内找到相应内容。</strong></p>
<h1 style="box-sizing:border-box;font-family:inherit;font-weight:500;color:inherit;font-size:2em;margin:1.5em 0px 0px;line-height:1.75em;border-bottom:1px solid rgb(238, 238, 238);padding-bottom:10px;">JDBC常见面试题</h1>
<h2 style="box-sizing:border-box;font-family:inherit;font-weight:500;color:inherit;line-height:1.5em;font-size:1.75em;margin:1.5em 0px 0px;border-bottom:1px solid rgb(238, 238, 238);padding-bottom:10px;">JDBC操作数据库的步骤 ？</h2>
<blockquote style="box-sizing:border-box;padding:10px 20px;margin:1.5em 0px;font-size:1em;border-left:2px solid rgb(0, 154, 97);background:rgb(246, 246, 246);color:rgb(85, 85, 85);"><span style="font-size:1em;color:rgb(85, 85, 85);"></span>JDBC操作数据库的步骤 ？<span style="font-size:1em;color:rgb(85, 85, 85);"></span></blockquote>
<ol style="box-sizing:border-box;margin:1.5em 0px;padding-left:0px;margin-left:3em;">
<li style="box-sizing:border-box;margin:0.3em 0px;">注册数据库驱动。</li>
<li style="box-sizing:border-box;margin:0.3em 0px;">建立数据库连接。</li>
<li style="box-sizing:border-box;margin:0.3em 0px;">创建一个Statement。</li>
<li style="box-sizing:border-box;margin:0.3em 0px;">执行SQL语句。</li>
<li style="box-sizing:border-box;margin:0.3em 0px;">处理结果集。</li>
<li style="box-sizing:border-box;margin:0.3em 0px;">关闭数据库连接</li>
</ol>
<p style="box-sizing:border-box;margin:1.5em 0px;">代码如下：</p>
<pre style="word-wrap:break-word;overflow-x:auto;border-radius:4px;box-sizing:border-box;display:block;color:rgb(51, 51, 51);font-family:&quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace;word-break:break-all;line-height:1.45;margin:1.5em 0px;padding:1em;border:none;font-size:0.93em;max-height:35em;position:relative;background:url(https://static.segmentfault.com/v-5b8f9b7e/global/css/../img/blueprint.png) 0% 0% / 30px rgb(246, 246, 246), 0% 0% / 30px;overflow:auto;margin-top:0px;"><code style="box-sizing:border-box;font-family:&quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace;padding:0px;color:inherit;border-radius:0px;font-size:1em;white-space:inherit;background:none;overflow-wrap:normal;">

        Connection connection = <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">null</span>;
        Statement statement = <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">null</span>;
        ResultSet resultSet = <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">null</span>;

        <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">try</span> {

            <span style="box-sizing:border-box;font-style:italic;color:rgb(153, 153, 136);">/*
            * 加载驱动有两种方式
            *
            * 1：会导致驱动会注册两次，过度依赖于mysql的api，脱离的mysql的开发包，程序则无法编译
            * 2：驱动只会加载一次，不需要依赖具体的驱动，灵活性高
            *
            * 我们一般都是使用第二种方式
            * */</span>

            <span style="box-sizing:border-box;font-style:italic;color:rgb(153, 153, 136);">//1.</span>
            <span style="box-sizing:border-box;font-style:italic;color:rgb(153, 153, 136);">//DriverManager.registerDriver(new com.mysql.jdbc.Driver());</span>

            <span style="box-sizing:border-box;font-style:italic;color:rgb(153, 153, 136);">//2.</span>
            Class.forName(<span style="box-sizing:border-box;color:rgb(221, 17, 68);">&quot;com.mysql.jdbc.Driver&quot;</span>);

            <span style="box-sizing:border-box;font-style:italic;color:rgb(153, 153, 136);">//获取与数据库连接的对象-Connetcion</span>
            connection = DriverManager.getConnection(<span style="box-sizing:border-box;color:rgb(221, 17, 68);">&quot;jdbc:mysql://localhost:3306/zhongfucheng&quot;</span>, <span style="box-sizing:border-box;color:rgb(221, 17, 68);">&quot;root&quot;</span>, <span style="box-sizing:border-box;color:rgb(221, 17, 68);">&quot;root&quot;</span>);

            <span style="box-sizing:border-box;font-style:italic;color:rgb(153, 153, 136);">//获取执行sql语句的statement对象</span>
            statement = connection.createStatement();

            <span style="box-sizing:border-box;font-style:italic;color:rgb(153, 153, 136);">//执行sql语句,拿到结果集</span>
            resultSet = statement.executeQuery(<span style="box-sizing:border-box;color:rgb(221, 17, 68);">&quot;SELECT * FROM users&quot;</span>);

            <span style="box-sizing:border-box;font-style:italic;color:rgb(153, 153, 136);">//遍历结果集，得到数据</span>
            <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">while</span> (resultSet.next()) {

                System.out.println(resultSet.getString(<span style="box-sizing:border-box;color:rgb(0, 128, 128);">1</span>));

                System.out.println(resultSet.getString(<span style="box-sizing:border-box;color:rgb(0, 128, 128);">2</span>));
            }
            
        } <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">catch</span> (SQLException e) {
            e.printStackTrace();
        } <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">catch</span> (ClassNotFoundException e) {
            e.printStackTrace();
        } <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">finally</span> {

            <span style="box-sizing:border-box;font-style:italic;color:rgb(153, 153, 136);">/*
            * 关闭资源，后调用的先关闭
            *
            * 关闭之前，要判断对象是否存在
            * */</span>

            <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">if</span> (resultSet != <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">null</span>) {
                <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">try</span> {
                    resultSet.close();
                } <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">catch</span> (SQLException e) {
                    e.printStackTrace();
                }

            }
            <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">if</span> (statement != <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">null</span>) {
                <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">try</span> {
                    statement.close();
                } <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">catch</span> (SQLException e) {
                    e.printStackTrace();
                }

            }
            <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">if</span> (connection != <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">null</span>) {
                <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">try</span> {
                    connection.close();
                } <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">catch</span> (SQLException e) {
                    e.printStackTrace();
                }

            }

        }</code></pre>
<h2 style="box-sizing:border-box;font-family:inherit;font-weight:500;color:inherit;line-height:1.5em;font-size:1.75em;margin:1.5em 0px 0px;border-bottom:1px solid rgb(238, 238, 238);padding-bottom:10px;">JDBC中的Statement 和PreparedStatement，CallableStatement的区别？</h2>
<blockquote style="box-sizing:border-box;padding:10px 20px;margin:1.5em 0px;font-size:1em;border-left:2px solid rgb(0, 154, 97);background:rgb(246, 246, 246);color:rgb(85, 85, 85);"><span style="font-size:1em;color:rgb(85, 85, 85);"></span>JDBC中的Statement 和PreparedStatement的区别？<span style="font-size:1em;color:rgb(85, 85, 85);"></span></blockquote>
<p style="box-sizing:border-box;margin:1.5em 0px;">区别：</p>
<ul style="box-sizing:border-box;margin:1.5em 0px;padding-left:0px;margin-left:3em;">
<li style="box-sizing:border-box;margin:0.3em 0px;">PreparedStatement是预编译的SQL语句，效率高于Statement。</li>
<li style="box-sizing:border-box;margin:0.3em 0px;">PreparedStatement支持?操作符，相对于Statement更加灵活。</li>
<li style="box-sizing:border-box;margin:0.3em 0px;">PreparedStatement可以防止SQL注入，安全性高于Statement。</li>
<li style="box-sizing:border-box;margin:0.3em 0px;">CallableStatement适用于执行存储过程。</li>
</ul>
<h2 style="box-sizing:border-box;font-family:inherit;font-weight:500;color:inherit;line-height:1.5em;font-size:1.75em;margin:1.5em 0px 0px;border-bottom:1px solid rgb(238, 238, 238);padding-bottom:10px;">JDBC中大数据量的分页解决方法?</h2>
<blockquote style="box-sizing:border-box;padding:10px 20px;margin:1.5em 0px;font-size:1em;border-left:2px solid rgb(0, 154, 97);background:rgb(246, 246, 246);color:rgb(85, 85, 85);"><span style="font-size:1em;color:rgb(85, 85, 85);"></span>JDBC中大数据量的分页解决方法?<span style="font-size:1em;color:rgb(85, 85, 85);"></span></blockquote>
<p style="box-sizing:border-box;margin:1.5em 0px;">最好的办法是利用sql语句进行分页，这样每次查询出的结果集中就只包含某页的数据内容。</p>
<p style="box-sizing:border-box;margin:1.5em 0px;">mysql语法：</p>
<pre style="word-wrap:break-word;overflow-x:auto;border-radius:4px;box-sizing:border-box;display:block;color:rgb(51, 51, 51);font-family:&quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace;word-break:break-all;line-height:1.45;margin:1.5em 0px;padding:1em;border:none;font-size:0.93em;max-height:35em;position:relative;background:url(https://static.segmentfault.com/v-5b8f9b7e/global/css/../img/blueprint.png) 0% 0% / 30px rgb(246, 246, 246), 0% 0% / 30px;overflow:auto;margin-top:0px;"><code style="box-sizing:border-box;font-family:&quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace;padding:0px;color:inherit;border-radius:0px;font-size:1em;white-space:inherit;background:none;overflow-wrap:normal;">
    <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">SELECT</span> *
    <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">FROM</span> 表名
    <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">LIMIT</span> [<span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">START</span>], <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">length</span>;
    
</code></pre>
<p style="box-sizing:border-box;margin:1.5em 0px;">oracle语法：</p>
<pre style="word-wrap:break-word;overflow-x:auto;border-radius:4px;box-sizing:border-box;display:block;color:rgb(51, 51, 51);font-family:&quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace;word-break:break-all;line-height:1.45;margin:1.5em 0px;padding:1em;border:none;font-size:0.93em;max-height:35em;position:relative;background:url(https://static.segmentfault.com/v-5b8f9b7e/global/css/../img/blueprint.png) 0% 0% / 30px rgb(246, 246, 246), 0% 0% / 30px;overflow:auto;margin-top:0px;"><code style="box-sizing:border-box;font-family:&quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace;padding:0px;color:inherit;border-radius:0px;font-size:1em;white-space:inherit;background:none;overflow-wrap:normal;">
    <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">SELECT</span> *<span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">FROM</span> (
        <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">SELECT</span> 列名,列名,<span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">ROWNUM</span> rn
        <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">FROM</span> 表名
        <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">WHERE</span> <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">ROWNUM</span>&lt;=(currentPage*lineSize)) temp
    
    <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">WHERE</span> temp.rn&gt;(currentPage<span style="box-sizing:border-box;color:rgb(0, 128, 128);">-1</span>)*lineSize;
</code></pre>
<h2 style="box-sizing:border-box;font-family:inherit;font-weight:500;color:inherit;line-height:1.5em;font-size:1.75em;margin:1.5em 0px 0px;border-bottom:1px solid rgb(238, 238, 238);padding-bottom:10px;">说说数据库连接池工作原理和实现方案？</h2>
<blockquote style="box-sizing:border-box;padding:10px 20px;margin:1.5em 0px;font-size:1em;border-left:2px solid rgb(0, 154, 97);background:rgb(246, 246, 246);color:rgb(85, 85, 85);"><span style="font-size:1em;color:rgb(85, 85, 85);"></span>说说数据库连接池工作原理和实现方案？<span style="font-size:1em;color:rgb(85, 85, 85);"></span></blockquote>
<p style="box-sizing:border-box;margin:1.5em 0px;">工作原理：</p>
<ul style="box-sizing:border-box;margin:1.5em 0px;padding-left:0px;margin-left:3em;"><li style="box-sizing:border-box;margin:0.3em 0px;">JAVA EE服务器启动时会建立一定数量的池连接，并一直维持不少于此数目的池连接。客户端程序需要连接时，池驱动程序会返回一个未使用的池连接并将其表记为忙。如果当前没有空闲连接，池驱动程序就新建一定数量的连接，新建连接的数量有配置参数决定。当使用的池连接调用完成后，池驱动程序将此连接表记为空闲，其他调用就可以使用这个连接。</li></ul>
<p style="box-sizing:border-box;margin:1.5em 0px;">实现方案：<strong style="box-sizing:border-box;font-weight:bold;">连接池使用集合来进行装载，返回的Connection是原始Connection的代理，代理Connection的close方法，当调用close方法时，不是真正关连接，而是把它代理的Connection对象放回到连接池中，等待下一次重复利用。</strong></p>
<p style="box-sizing:border-box;margin:1.5em 0px;">具体代码：</p>
<pre style="word-wrap:break-word;overflow-x:auto;border-radius:4px;box-sizing:border-box;display:block;color:rgb(51, 51, 51);font-family:&quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace;word-break:break-all;line-height:1.45;margin:1.5em 0px;padding:1em;border:none;font-size:0.93em;max-height:35em;position:relative;background:url(https://static.segmentfault.com/v-5b8f9b7e/global/css/../img/blueprint.png) 0% 0% / 30px rgb(246, 246, 246), 0% 0% / 30px;overflow:auto;margin-top:0px;"><code style="box-sizing:border-box;font-family:&quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace;padding:0px;color:inherit;border-radius:0px;font-size:1em;white-space:inherit;background:none;overflow-wrap:normal;">

 <span style="box-sizing:border-box;color:rgb(153, 153, 153);font-weight:bold;">@Override</span>
    <span style="box-sizing:border-box;"><span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">public</span> Connection <span style="box-sizing:border-box;color:rgb(153, 0, 0);font-weight:bold;">getConnection</span><span style="box-sizing:border-box;">()</span> <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">throws</span> SQLException </span>{

        <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">if</span> (list.size() &gt; <span style="box-sizing:border-box;color:rgb(0, 128, 128);">0</span>) {
            <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">final</span> Connection connection = list.removeFirst();

            <span style="box-sizing:border-box;font-style:italic;color:rgb(153, 153, 136);">//看看池的大小</span>
            System.out.println(list.size());

            <span style="box-sizing:border-box;font-style:italic;color:rgb(153, 153, 136);">//返回一个动态代理对象</span>
            <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">return</span> (Connection) Proxy.newProxyInstance(Demo1.class.getClassLoader(), connection.getClass().getInterfaces(), <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">new</span> InvocationHandler() {

                <span style="box-sizing:border-box;color:rgb(153, 153, 153);font-weight:bold;">@Override</span>
                <span style="box-sizing:border-box;"><span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">public</span> Object <span style="box-sizing:border-box;color:rgb(153, 0, 0);font-weight:bold;">invoke</span><span style="box-sizing:border-box;">(Object proxy, Method method, Object[] args)</span> <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">throws</span> Throwable </span>{

                    <span style="box-sizing:border-box;font-style:italic;color:rgb(153, 153, 136);">//如果不是调用close方法，就按照正常的来调用</span>
                    <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">if</span> (!method.getName().equals(<span style="box-sizing:border-box;color:rgb(221, 17, 68);">&quot;close&quot;</span>)) {
                        method.invoke(connection, args);
                    } <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">else</span> {

                        <span style="box-sizing:border-box;font-style:italic;color:rgb(153, 153, 136);">//进到这里来，说明调用的是close方法</span>
                        list.add(connection);

                        <span style="box-sizing:border-box;font-style:italic;color:rgb(153, 153, 136);">//再看看池的大小</span>
                        System.out.println(list.size());

                    }
                    <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">return</span> <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">null</span>;
                }

            });
        }
        <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">return</span> <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">null</span>;
    }
</code></pre>
<h2 style="box-sizing:border-box;font-family:inherit;font-weight:500;color:inherit;line-height:1.5em;font-size:1.75em;margin:1.5em 0px 0px;border-bottom:1px solid rgb(238, 238, 238);padding-bottom:10px;">Java中如何进行事务的处理?</h2>
<blockquote style="box-sizing:border-box;padding:10px 20px;margin:1.5em 0px;font-size:1em;border-left:2px solid rgb(0, 154, 97);background:rgb(246, 246, 246);color:rgb(85, 85, 85);"><span style="font-size:1em;color:rgb(85, 85, 85);"></span>Java中如何进行事务的处理?<span style="font-size:1em;color:rgb(85, 85, 85);"></span></blockquote>
<ol style="box-sizing:border-box;margin:1.5em 0px;padding-left:0px;margin-left:3em;">
<li style="box-sizing:border-box;margin:0.3em 0px;">
<strong style="box-sizing:border-box;font-weight:bold;">事务是作为单个逻辑工作单元执行的一系列操作</strong>。</li>
<li style="box-sizing:border-box;margin:0.3em 0px;">一个逻辑工作单元必须有四个属性，称为<strong style="box-sizing:border-box;font-weight:bold;">原子性、一致性、隔离性和持久性 (ACID) 属性，只有这样才能成为一个事务</strong>
</li>
</ol>
<p style="box-sizing:border-box;margin:1.5em 0px;">Connection类中提供了4个事务处理方法:</p>
<ul style="box-sizing:border-box;margin:1.5em 0px;padding-left:0px;margin-left:3em;">
<li style="box-sizing:border-box;margin:0.3em 0px;">setAutoCommit(Boolean autoCommit):设置是否自动提交事务,默认为自动提交,即为true,通过设置false禁止自动提交事务;</li>
<li style="box-sizing:border-box;margin:0.3em 0px;">commit():提交事务;</li>
<li style="box-sizing:border-box;margin:0.3em 0px;">rollback():回滚事务.</li>
<li style="box-sizing:border-box;margin:0.3em 0px;">
<p style="box-sizing:border-box;margin:0px;margin-top:0px;">savepoint:保存点</p>
<ul style="box-sizing:border-box;margin:1.5em 0px;padding-left:0px;margin-left:3em;margin-top:0px;margin-bottom:0px;"><li style="box-sizing:border-box;margin:0.3em 0px;">注意：savepoint不会结束当前事务，普通提交和回滚都会结束当前事务的</li></ul>
</li>
</ul>
<h2 style="box-sizing:border-box;font-family:inherit;font-weight:500;color:inherit;line-height:1.5em;font-size:1.75em;margin:1.5em 0px 0px;border-bottom:1px solid rgb(238, 238, 238);padding-bottom:10px;">修改JDBC代码质量</h2>
<blockquote style="box-sizing:border-box;padding:10px 20px;margin:1.5em 0px;font-size:1em;border-left:2px solid rgb(0, 154, 97);background:rgb(246, 246, 246);color:rgb(85, 85, 85);"><span style="font-size:1em;color:rgb(85, 85, 85);"></span>下述程序是一段简单的基于JDBC的数据库访问代码,实现了以下功能:从数据库中查询product表中的所有记录,然后打印输出到控制台.该代码质量较低,如没有正确处理异常,连接字符串以”魔数”的形式直接存在于代码中等,请用你的思路重新编写程序,<strong style="box-sizing:border-box;font-weight:bold;">完成相同的功能,提高代码质量.</strong>
<span style="font-size:1em;color:rgb(85, 85, 85);"></span></blockquote>
<p style="box-sizing:border-box;margin:1.5em 0px;">原来的代码：</p>
<pre style="word-wrap:break-word;overflow-x:auto;border-radius:4px;box-sizing:border-box;display:block;color:rgb(51, 51, 51);font-family:&quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace;word-break:break-all;line-height:1.45;margin:1.5em 0px;padding:1em;border:none;font-size:0.93em;max-height:35em;position:relative;background:url(https://static.segmentfault.com/v-5b8f9b7e/global/css/../img/blueprint.png) 0% 0% / 30px rgb(246, 246, 246), 0% 0% / 30px;overflow:auto;margin-top:0px;"><code style="box-sizing:border-box;font-family:&quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace;padding:0px;color:inherit;border-radius:0px;font-size:1em;white-space:inherit;background:none;overflow-wrap:normal;">

<span style="box-sizing:border-box;"><span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">public</span> <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">void</span> <span style="box-sizing:border-box;color:rgb(153, 0, 0);font-weight:bold;">printProducts</span><span style="box-sizing:border-box;">()</span></span>{
    Connection c = <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">null</span>;
    Statements s = <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">null</span>;
    ResultSet r = <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">null</span>;
    <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">try</span>{

c=DriverManager.getConnection(<span style="box-sizing:border-box;color:rgb(221, 17, 68);">&quot;jdbc:oracle:thin:@127.0.0.1:1521:sid&quot;</span>,<span style="box-sizing:border-box;color:rgb(221, 17, 68);">&quot;username&quot;</span>,<span style="box-sizing:border-box;color:rgb(221, 17, 68);">&quot;password&quot;</span>);
        s=c.createStatement();
        r=s.executeQuery(<span style="box-sizing:border-box;color:rgb(221, 17, 68);">&quot;select id, name, price from product&quot;</span>);
        System.out.println(<span style="box-sizing:border-box;color:rgb(221, 17, 68);">&quot;Id\tName\tPrice&quot;</span>);
        <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">while</span>(r.next()){
            <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">int</span> x = r.getInt(<span style="box-sizing:border-box;color:rgb(221, 17, 68);">&quot;id&quot;</span>);
            String y = r.getString(<span style="box-sizing:border-box;color:rgb(221, 17, 68);">&quot;name&quot;</span>);
            <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">float</span> z = r.getFloat(<span style="box-sizing:border-box;color:rgb(221, 17, 68);">&quot;price&quot;</span>);
            System.out.println(x + <span style="box-sizing:border-box;color:rgb(221, 17, 68);">&quot;\t&quot;</span> + y + <span style="box-sizing:border-box;color:rgb(221, 17, 68);">&quot;\t&quot;</span> + z);
        }
    } <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">catch</span>(Exception e){

    }
}</code></pre>
<p style="box-sizing:border-box;margin:1.5em 0px;">修改后的代码：</p>
<pre style="word-wrap:break-word;overflow-x:auto;border-radius:4px;box-sizing:border-box;display:block;color:rgb(51, 51, 51);font-family:&quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace;word-break:break-all;line-height:1.45;margin:1.5em 0px;padding:1em;border:none;font-size:0.93em;max-height:35em;position:relative;background:url(https://static.segmentfault.com/v-5b8f9b7e/global/css/../img/blueprint.png) 0% 0% / 30px rgb(246, 246, 246), 0% 0% / 30px;overflow:auto;margin-top:0px;"><code style="box-sizing:border-box;font-family:&quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace;padding:0px;color:inherit;border-radius:0px;font-size:1em;white-space:inherit;background:none;overflow-wrap:normal;">

<span style="box-sizing:border-box;"><span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">class</span> <span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">Constant</span></span>{
    <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">public</span> <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">static</span> <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">final</span> String URL=<span style="box-sizing:border-box;color:rgb(221, 17, 68);">&quot;jdbc:oracle:thin:@127.0.0.1:1521:sid&quot;</span>;
    <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">public</span> <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">static</span> <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">final</span> String USERNAME=<span style="box-sizing:border-box;color:rgb(221, 17, 68);">&quot;username&quot;</span>;
    <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">public</span> <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">static</span> <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">final</span> String PASSWORD=<span style="box-sizing:border-box;color:rgb(221, 17, 68);">&quot;password&quot;</span>;
}

<span style="box-sizing:border-box;"><span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">class</span> <span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">DAOException</span> <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">extends</span> <span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">Exception</span></span>{
    <span style="box-sizing:border-box;"><span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">public</span> <span style="box-sizing:border-box;color:rgb(153, 0, 0);font-weight:bold;">DAOException</span><span style="box-sizing:border-box;">()</span></span>{
        <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">super</span>();
    }
    <span style="box-sizing:border-box;"><span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">public</span> <span style="box-sizing:border-box;color:rgb(153, 0, 0);font-weight:bold;">DAOException</span><span style="box-sizing:border-box;">(String msg)</span></span>{
        <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">super</span>(msg);
    }
}

<span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">public</span> <span style="box-sizing:border-box;"><span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">class</span> <span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">Test</span></span>{

    <span style="box-sizing:border-box;"><span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">public</span> <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">void</span> <span style="box-sizing:border-box;color:rgb(153, 0, 0);font-weight:bold;">printProducts</span><span style="box-sizing:border-box;">()</span> <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">throws</span> DAOException</span>{
        Connection c = <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">null</span>;
        Statement s = <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">null</span>;
        ResultSet r = <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">null</span>;
        <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">try</span>{
            c = DriverManager.getConnection(Constant.URL,Constant.USERNAME,Constant.PASSWORD);
            s = c.createStatement();
            r = s.executeQuery(<span style="box-sizing:border-box;color:rgb(221, 17, 68);">&quot;select id,name,price from product&quot;</span>);
            System.out.println(<span style="box-sizing:border-box;color:rgb(221, 17, 68);">&quot;Id\tName\tPrice&quot;</span>);
            <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">while</span>(r.next()){
                <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">int</span> x = r.getInt(<span style="box-sizing:border-box;color:rgb(221, 17, 68);">&quot;id&quot;</span>);
                String y = r.getString(<span style="box-sizing:border-box;color:rgb(221, 17, 68);">&quot;name&quot;</span>);
                <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">float</span> z = r.getFloat(<span style="box-sizing:border-box;color:rgb(221, 17, 68);">&quot;price&quot;</span>);
                System.out.println(x + <span style="box-sizing:border-box;color:rgb(221, 17, 68);">&quot;\t&quot;</span> + y + <span style="box-sizing:border-box;color:rgb(221, 17, 68);">&quot;\t&quot;</span> + z);
            }
        } <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">catch</span> (SQLException e){
            <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">throw</span> <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">new</span> DAOException(<span style="box-sizing:border-box;color:rgb(221, 17, 68);">&quot;数据库异常&quot;</span>);
        } <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">finally</span> {
            <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">try</span>{
                r.close();
                s.close();
                c.close();
            } <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">catch</span> (SQLException e) {
                e.printStackTrace();
            }
        }
    }
}</code></pre>
<p style="box-sizing:border-box;margin:1.5em 0px;">修改点：</p>
<ul style="box-sizing:border-box;margin:1.5em 0px;padding-left:0px;margin-left:3em;">
<li style="box-sizing:border-box;margin:0.3em 0px;">url、password等信息不应该直接使用字符串“写死”，可以使用常量代替</li>
<li style="box-sizing:border-box;margin:0.3em 0px;">catch中应该回滚事务，抛出RuntimeException也是回滚事务的一种方法</li>
<li style="box-sizing:border-box;margin:0.3em 0px;">关闭资源</li>
</ul>
<h2 style="box-sizing:border-box;font-family:inherit;font-weight:500;color:inherit;line-height:1.5em;font-size:1.75em;margin:1.5em 0px 0px;border-bottom:1px solid rgb(238, 238, 238);padding-bottom:10px;">写出一段JDBC连接本机MySQL数据库的代码</h2>
<blockquote style="box-sizing:border-box;padding:10px 20px;margin:1.5em 0px;font-size:1em;border-left:2px solid rgb(0, 154, 97);background:rgb(246, 246, 246);color:rgb(85, 85, 85);"><span style="font-size:1em;color:rgb(85, 85, 85);"></span>写出一段JDBC连接本机MySQL数据库的代码<span style="font-size:1em;color:rgb(85, 85, 85);"></span></blockquote>
<pre style="word-wrap:break-word;overflow-x:auto;border-radius:4px;box-sizing:border-box;display:block;color:rgb(51, 51, 51);font-family:&quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace;word-break:break-all;line-height:1.45;margin:1.5em 0px;padding:1em;border:none;font-size:0.93em;max-height:35em;position:relative;background:url(https://static.segmentfault.com/v-5b8f9b7e/global/css/../img/blueprint.png) 0% 0% / 30px rgb(246, 246, 246), 0% 0% / 30px;overflow:auto;margin-top:0px;"><code style="box-sizing:border-box;font-family:&quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace;padding:0px;color:inherit;border-radius:0px;font-size:1em;white-space:inherit;background:none;overflow-wrap:normal;">

Class.forName(<span style="box-sizing:border-box;color:rgb(221, 17, 68);">&quot;com.mysql.jdbc.Driver&quot;</span>);
String url=<span style="box-sizing:border-box;color:rgb(221, 17, 68);">&quot;jdbc:mysql://localhost/test&quot;</span>;
Stirng user=<span style="box-sizing:border-box;color:rgb(221, 17, 68);">'root'</span>;
String password=<span style="box-sizing:border-box;color:rgb(221, 17, 68);">'root'</span>;
Connection conn = DriverManager.getConnection(url,user,password);

</code></pre>
<h2 style="box-sizing:border-box;font-family:inherit;font-weight:500;color:inherit;line-height:1.5em;font-size:1.75em;margin:1.5em 0px 0px;border-bottom:1px solid rgb(238, 238, 238);padding-bottom:10px;">JDBC是如何实现Java程序和JDBC驱动的松耦合的？</h2>
<blockquote style="box-sizing:border-box;padding:10px 20px;margin:1.5em 0px;font-size:1em;border-left:2px solid rgb(0, 154, 97);background:rgb(246, 246, 246);color:rgb(85, 85, 85);"><span style="font-size:1em;color:rgb(85, 85, 85);"></span>JDBC是如何实现Java程序和JDBC驱动的松耦合的？<span style="font-size:1em;color:rgb(85, 85, 85);"></span></blockquote>
<p style="box-sizing:border-box;margin:1.5em 0px;">通过制定接口，数据库厂商来实现。我们只要通过接口调用即可。随便看一个简单的JDBC示例<strong style="box-sizing:border-box;font-weight:bold;">，你会发现所有操作都是通过JDBC接口完成的，而驱动只有在通过Class.forName反射机制来加载的时候才会出现。</strong></p>
<h2 style="box-sizing:border-box;font-family:inherit;font-weight:500;color:inherit;line-height:1.5em;font-size:1.75em;margin:1.5em 0px 0px;border-bottom:1px solid rgb(238, 238, 238);padding-bottom:10px;">execute，executeQuery，executeUpdate的区别是什么？</h2>
<blockquote style="box-sizing:border-box;padding:10px 20px;margin:1.5em 0px;font-size:1em;border-left:2px solid rgb(0, 154, 97);background:rgb(246, 246, 246);color:rgb(85, 85, 85);"><span style="font-size:1em;color:rgb(85, 85, 85);"></span>execute，executeQuery，executeUpdate的区别是什么？<span style="font-size:1em;color:rgb(85, 85, 85);"></span></blockquote>
<ul style="box-sizing:border-box;margin:1.5em 0px;padding-left:0px;margin-left:3em;">
<li style="box-sizing:border-box;margin:0.3em 0px;">Statement的execute(String query)方法用来<strong style="box-sizing:border-box;font-weight:bold;">执行任意的SQL查询</strong>，如果查询的结果是一个ResultSet，这个方法就返回true。如果结果不是ResultSet，比如insert或者update查询，它就会返回false。我们可以通过它的getResultSet方法来获取ResultSet，或者通过getUpdateCount()方法来获取更新的记录条数。</li>
<li style="box-sizing:border-box;margin:0.3em 0px;">Statement的executeQuery(String query)接口用来执行select查询，并且返回ResultSet。即使查询不到记录返回的ResultSet也不会为null。我们通常使用executeQuery<strong style="box-sizing:border-box;font-weight:bold;">来执行查询语句</strong>，这样的话如果传进来的是insert或者update语句的话，它会抛出错误信息为 “executeQuery method can not be used for update”的java.util.SQLException。</li>
<li style="box-sizing:border-box;margin:0.3em 0px;">Statement的executeUpdate(String query)方法<strong style="box-sizing:border-box;font-weight:bold;">用来执行insert或者update/delete（DML）语句，或者 什么也不返回DDL语句</strong>。返回值是int类型，如果是DML语句的话，它就是更新的条数，如果是DDL的话，就返回0。</li>
<li style="box-sizing:border-box;margin:0.3em 0px;">只有当你不确定是什么语句的时候才应该使用execute()方法，否则应该使用executeQuery或者executeUpdate方法。</li>
</ul>
<h2 style="box-sizing:border-box;font-family:inherit;font-weight:500;color:inherit;line-height:1.5em;font-size:1.75em;margin:1.5em 0px 0px;border-bottom:1px solid rgb(238, 238, 238);padding-bottom:10px;">PreparedStatement的缺点是什么，怎么解决这个问题？</h2>
<blockquote style="box-sizing:border-box;padding:10px 20px;margin:1.5em 0px;font-size:1em;border-left:2px solid rgb(0, 154, 97);background:rgb(246, 246, 246);color:rgb(85, 85, 85);"><span style="font-size:1em;color:rgb(85, 85, 85);"></span>PreparedStatement的缺点是什么，怎么解决这个问题？<span style="font-size:1em;color:rgb(85, 85, 85);"></span></blockquote>
<p style="box-sizing:border-box;margin:1.5em 0px;">PreparedStatement的一个缺点是，<strong style="box-sizing:border-box;font-weight:bold;">我们不能直接用它来执行in条件语句</strong>；需要执行IN条件语句的话，下面有一些解决方案：</p>
<ul style="box-sizing:border-box;margin:1.5em 0px;padding-left:0px;margin-left:3em;">
<li style="box-sizing:border-box;margin:0.3em 0px;">分别进行单条查询——这样做性能很差，不推荐。</li>
<li style="box-sizing:border-box;margin:0.3em 0px;">使用存储过程——这取决于数据库的实现，不是所有数据库都支持。</li>
<li style="box-sizing:border-box;margin:0.3em 0px;">动态生成PreparedStatement——这是个好办法，但是不能享受PreparedStatement的缓存带来的好处了。</li>
<li style="box-sizing:border-box;margin:0.3em 0px;">在PreparedStatement查询中使用NULL值——如果你知道输入变量的最大个数的话，这是个不错的办法，扩展一下还可以支持无限参数。</li>
</ul>
<h2 style="box-sizing:border-box;font-family:inherit;font-weight:500;color:inherit;line-height:1.5em;font-size:1.75em;margin:1.5em 0px 0px;border-bottom:1px solid rgb(238, 238, 238);padding-bottom:10px;">JDBC的脏读是什么？哪种数据库隔离级别能防止脏读？</h2>
<blockquote style="box-sizing:border-box;padding:10px 20px;margin:1.5em 0px;font-size:1em;border-left:2px solid rgb(0, 154, 97);background:rgb(246, 246, 246);color:rgb(85, 85, 85);"><span style="font-size:1em;color:rgb(85, 85, 85);"></span>JDBC的脏读是什么？哪种数据库隔离级别能防止脏读？<span style="font-size:1em;color:rgb(85, 85, 85);"></span></blockquote>
<p style="box-sizing:border-box;margin:1.5em 0px;">脏读：<strong style="box-sizing:border-box;font-weight:bold;">一个事务读取到另外一个事务未提交的数据</strong></p>
<p style="box-sizing:border-box;margin:1.5em 0px;">例子：A向B转账，A执行了转账语句，但A还没有提交事务，B读取数据，发现自己账户钱变多了！B跟A说，我已经收到钱了。A回滚事务【rollback】，等B再查看账户的钱时，发现钱并没有多。</p>
<p style="box-sizing:border-box;margin:1.5em 0px;">下面的三种个隔离级别都可以防止：</p>
<ul style="box-sizing:border-box;margin:1.5em 0px;padding-left:0px;margin-left:3em;">
<li style="box-sizing:border-box;margin:0.3em 0px;">Serializable【TRANSACTION_SERIALIZABLE】</li>
<li style="box-sizing:border-box;margin:0.3em 0px;">Repeatable read【TRANSACTION_REPEATABLE_READ】</li>
<li style="box-sizing:border-box;margin:0.3em 0px;">Read committed【TRANSACTION_READ_COMMITTED】</li>
</ul>
<h2 style="box-sizing:border-box;font-family:inherit;font-weight:500;color:inherit;line-height:1.5em;font-size:1.75em;margin:1.5em 0px 0px;border-bottom:1px solid rgb(238, 238, 238);padding-bottom:10px;">什么是幻读，哪种隔离级别可以防止幻读？</h2>
<blockquote style="box-sizing:border-box;padding:10px 20px;margin:1.5em 0px;font-size:1em;border-left:2px solid rgb(0, 154, 97);background:rgb(246, 246, 246);color:rgb(85, 85, 85);"><span style="font-size:1em;color:rgb(85, 85, 85);"></span>什么是幻读，哪种隔离级别可以防止幻读？<span style="font-size:1em;color:rgb(85, 85, 85);"></span></blockquote>
<p style="box-sizing:border-box;margin:1.5em 0px;"><strong style="box-sizing:border-box;font-weight:bold;">是指在一个事务内读取到了别的事务插入的数据，导致前后读取不一致。</strong></p>
<p style="box-sizing:border-box;margin:1.5em 0px;"><strong style="box-sizing:border-box;font-weight:bold;">只有TRANSACTION_SERIALIZABLE隔离级别才能防止产生幻读。</strong></p>
<h2 style="box-sizing:border-box;font-family:inherit;font-weight:500;color:inherit;line-height:1.5em;font-size:1.75em;margin:1.5em 0px 0px;border-bottom:1px solid rgb(238, 238, 238);padding-bottom:10px;">JDBC的DriverManager是用来做什么的？</h2>
<blockquote style="box-sizing:border-box;padding:10px 20px;margin:1.5em 0px;font-size:1em;border-left:2px solid rgb(0, 154, 97);background:rgb(246, 246, 246);color:rgb(85, 85, 85);"><span style="font-size:1em;color:rgb(85, 85, 85);"></span>JDBC的DriverManager是用来做什么的？<span style="font-size:1em;color:rgb(85, 85, 85);"></span></blockquote>
<ul style="box-sizing:border-box;margin:1.5em 0px;padding-left:0px;margin-left:3em;">
<li style="box-sizing:border-box;margin:0.3em 0px;">JDBC的DriverManager是一个<strong style="box-sizing:border-box;font-weight:bold;">工厂类</strong>，我们<strong style="box-sizing:border-box;font-weight:bold;">通过它来创建数据库连接。</strong>
</li>
<li style="box-sizing:border-box;margin:0.3em 0px;">当JDBC的Driver类被加载进来时，它会自己注册到DriverManager类里面</li>
<li style="box-sizing:border-box;margin:0.3em 0px;">然后我们会把数据库配置信息传成DriverManager.getConnection()方法<strong style="box-sizing:border-box;font-weight:bold;">，DriverManager会使用注册到它里面的驱动来获取数据库连接，并返回给调用的程序</strong>。</li>
</ul>
<h2 style="box-sizing:border-box;font-family:inherit;font-weight:500;color:inherit;line-height:1.5em;font-size:1.75em;margin:1.5em 0px 0px;border-bottom:1px solid rgb(238, 238, 238);padding-bottom:10px;">JDBC的ResultSet是什么？</h2>
<blockquote style="box-sizing:border-box;padding:10px 20px;margin:1.5em 0px;font-size:1em;border-left:2px solid rgb(0, 154, 97);background:rgb(246, 246, 246);color:rgb(85, 85, 85);"><span style="font-size:1em;color:rgb(85, 85, 85);"></span>JDBC的ResultSet是什么?<span style="font-size:1em;color:rgb(85, 85, 85);"></span></blockquote>
<ul style="box-sizing:border-box;margin:1.5em 0px;padding-left:0px;margin-left:3em;">
<li style="box-sizing:border-box;margin:0.3em 0px;"><strong style="box-sizing:border-box;font-weight:bold;">在查询数据库后会返回一个ResultSet，它就像是查询结果集的一张数据表。 </strong></li>
<li style="box-sizing:border-box;margin:0.3em 0px;">ResultSet对象维护了一个游标，指向当前的数据行。开始的时候这个游标指向的是第一行。如果调用了ResultSet的next()方法游标会下移一行，如果没有更多的数据了，next()方法会返回false。可以在for循环中用它来遍历数据集。</li>
<li style="box-sizing:border-box;margin:0.3em 0px;">默认的ResultSet是不能更新的，游标也只能往下移。也就是说你只能从第一行到最后一行遍历一遍。不过也可以创建可以回滚或者可更新的ResultSet</li>
<li style="box-sizing:border-box;margin:0.3em 0px;"><strong style="box-sizing:border-box;font-weight:bold;">当生成ResultSet的Statement对象要关闭或者重新执行或是获取下一个ResultSet的时候，ResultSet对象也会自动关闭。</strong></li>
<li style="box-sizing:border-box;margin:0.3em 0px;">可以通过ResultSet的getter方法，传入列名或者从1开始的序号来获取列数据。</li>
</ul>
<h2 style="box-sizing:border-box;font-family:inherit;font-weight:500;color:inherit;line-height:1.5em;font-size:1.75em;margin:1.5em 0px 0px;border-bottom:1px solid rgb(238, 238, 238);padding-bottom:10px;">有哪些不同的ResultSet？</h2>
<blockquote style="box-sizing:border-box;padding:10px 20px;margin:1.5em 0px;font-size:1em;border-left:2px solid rgb(0, 154, 97);background:rgb(246, 246, 246);color:rgb(85, 85, 85);"><span style="font-size:1em;color:rgb(85, 85, 85);"></span>有哪些不同的ResultSet？<span style="font-size:1em;color:rgb(85, 85, 85);"></span></blockquote>
<p style="box-sizing:border-box;margin:1.5em 0px;">根据创建Statement时输入参数的不同，会对应不同类型的ResultSet。如果你看下Connection的方法，你会发现createStatement和prepareStatement方法重载了，以支持不同的ResultSet和并发类型。</p>
<p style="box-sizing:border-box;margin:1.5em 0px;">一共有三种ResultSet对象。</p>
<ul style="box-sizing:border-box;margin:1.5em 0px;padding-left:0px;margin-left:3em;">
<li style="box-sizing:border-box;margin:0.3em 0px;"><strong style="box-sizing:border-box;font-weight:bold;">ResultSet.TYPE_FORWARD_ONLY：这是默认的类型，它的游标只能往下移。</strong></li>
<li style="box-sizing:border-box;margin:0.3em 0px;"><strong style="box-sizing:border-box;font-weight:bold;">ResultSet.TYPE_SCROLL_INSENSITIVE：游标可以上下移动，一旦它创建后，数据库里的数据再发生修改，对它来说是透明的。</strong></li>
<li style="box-sizing:border-box;margin:0.3em 0px;"><strong style="box-sizing:border-box;font-weight:bold;">ResultSet.TYPE_SCROLL_SENSITIVE：游标可以上下移动，如果生成后数据库还发生了修改操作，它是能够感知到的。</strong></li>
</ul>
<p style="box-sizing:border-box;margin:1.5em 0px;">ResultSet有两种并发类型。</p>
<ul style="box-sizing:border-box;margin:1.5em 0px;padding-left:0px;margin-left:3em;">
<li style="box-sizing:border-box;margin:0.3em 0px;">ResultSet.CONCUR_READ_ONLY:<strong style="box-sizing:border-box;font-weight:bold;">ResultSet是只读的，这是默认类型</strong>。</li>
<li style="box-sizing:border-box;margin:0.3em 0px;">ResultSet.CONCUR_UPDATABLE:<strong style="box-sizing:border-box;font-weight:bold;">我们可以使用ResultSet的更新方法来更新里面的数据。</strong>
</li>
</ul>
<h2 style="box-sizing:border-box;font-family:inherit;font-weight:500;color:inherit;line-height:1.5em;font-size:1.75em;margin:1.5em 0px 0px;border-bottom:1px solid rgb(238, 238, 238);padding-bottom:10px;">JDBC的DataSource是什么，有什么好处</h2>
<blockquote style="box-sizing:border-box;padding:10px 20px;margin:1.5em 0px;font-size:1em;border-left:2px solid rgb(0, 154, 97);background:rgb(246, 246, 246);color:rgb(85, 85, 85);"><span style="font-size:1em;color:rgb(85, 85, 85);"></span>JDBC的DataSource是什么，有什么好处<span style="font-size:1em;color:rgb(85, 85, 85);"></span></blockquote>
<p style="box-sizing:border-box;margin:1.5em 0px;">DataSource即数据源，它是定义在javax.sql中的一个接口，跟DriverManager相比，它的功能要更强大<strong style="box-sizing:border-box;font-weight:bold;">。我们可以用它来创建数据库连接，当然驱动的实现类会实际去完成这个工作。除了能创建连接外，它还提供了如下的特性：</strong></p>
<ul style="box-sizing:border-box;margin:1.5em 0px;padding-left:0px;margin-left:3em;">
<li style="box-sizing:border-box;margin:0.3em 0px;"><strong style="box-sizing:border-box;font-weight:bold;">缓存PreparedStatement以便更快的执行</strong></li>
<li style="box-sizing:border-box;margin:0.3em 0px;"><strong style="box-sizing:border-box;font-weight:bold;">可以设置连接超时时间</strong></li>
<li style="box-sizing:border-box;margin:0.3em 0px;"><strong style="box-sizing:border-box;font-weight:bold;">提供日志记录的功能</strong></li>
<li style="box-sizing:border-box;margin:0.3em 0px;"><strong style="box-sizing:border-box;font-weight:bold;">ResultSet大小的最大阈值设置</strong></li>
<li style="box-sizing:border-box;margin:0.3em 0px;"><strong style="box-sizing:border-box;font-weight:bold;">通过JNDI的支持，可以为servlet容器提供连接池的功能</strong></li>
</ul>
<h2 style="box-sizing:border-box;font-family:inherit;font-weight:500;color:inherit;line-height:1.5em;font-size:1.75em;margin:1.5em 0px 0px;border-bottom:1px solid rgb(238, 238, 238);padding-bottom:10px;">如何通过JDBC的DataSource和Apache Tomcat的JNDI来创建连接池？</h2>
<blockquote style="box-sizing:border-box;padding:10px 20px;margin:1.5em 0px;font-size:1em;border-left:2px solid rgb(0, 154, 97);background:rgb(246, 246, 246);color:rgb(85, 85, 85);"><span style="font-size:1em;color:rgb(85, 85, 85);"></span>如何通过JDBC的DataSource和Apache Tomcat的JNDI来创建连接池？<span style="font-size:1em;color:rgb(85, 85, 85);"></span></blockquote>
<p style="box-sizing:border-box;margin:1.5em 0px;">Tomcat服务器也给我们提供了连接池，内部其实就是DBCP</p>
<p style="box-sizing:border-box;margin:1.5em 0px;">步骤：</p>
<ol style="box-sizing:border-box;margin:1.5em 0px;padding-left:0px;margin-left:3em;">
<li style="box-sizing:border-box;margin:0.3em 0px;">在META-INF目录下配置context.xml文件【文件内容可以在tomcat默认页面的 JNDI Resources下Configure Tomcat's Resource Factory找到】</li>
<li style="box-sizing:border-box;margin:0.3em 0px;">导入Mysql或oracle开发包到tomcat的lib目录下</li>
<li style="box-sizing:border-box;margin:0.3em 0px;">初始化JNDI-&gt;获取JNDI容器-&gt;检索以XXX为名字在JNDI容器存放的连接池</li>
</ol>
<p style="box-sizing:border-box;margin:1.5em 0px;">context.xml文件的配置：</p>
<pre style="word-wrap:break-word;overflow-x:auto;border-radius:4px;box-sizing:border-box;display:block;color:rgb(51, 51, 51);font-family:&quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace;word-break:break-all;line-height:1.45;margin:1.5em 0px;padding:1em;border:none;font-size:0.93em;max-height:35em;position:relative;background:url(https://static.segmentfault.com/v-5b8f9b7e/global/css/../img/blueprint.png) 0% 0% / 30px rgb(246, 246, 246), 0% 0% / 30px;overflow:auto;margin-top:0px;"><code style="box-sizing:border-box;font-family:&quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace;padding:0px;color:inherit;border-radius:0px;font-size:1em;white-space:inherit;background:none;overflow-wrap:normal;">
&lt;Context&gt;

  &lt;Resource name=<span style="box-sizing:border-box;color:rgb(221, 17, 68);">&quot;jdbc/EmployeeDB&quot;</span>
            auth=<span style="box-sizing:border-box;color:rgb(221, 17, 68);">&quot;Container&quot;</span>
            type=<span style="box-sizing:border-box;color:rgb(221, 17, 68);">&quot;javax.sql.DataSource&quot;</span>
            
            username=<span style="box-sizing:border-box;color:rgb(221, 17, 68);">&quot;root&quot;</span>
            password=<span style="box-sizing:border-box;color:rgb(221, 17, 68);">&quot;root&quot;</span>
            driverClassName=<span style="box-sizing:border-box;color:rgb(221, 17, 68);">&quot;com.mysql.jdbc.Driver&quot;</span>
            url=<span style="box-sizing:border-box;color:rgb(221, 17, 68);">&quot;jdbc:mysql://localhost:3306/zhongfucheng&quot;</span>
            maxActive=<span style="box-sizing:border-box;color:rgb(221, 17, 68);">&quot;8&quot;</span>
            maxIdle=<span style="box-sizing:border-box;color:rgb(221, 17, 68);">&quot;4&quot;</span>/&gt;
&lt;/Context&gt;
</code></pre>
<pre style="word-wrap:break-word;overflow-x:auto;border-radius:4px;box-sizing:border-box;display:block;color:rgb(51, 51, 51);font-family:&quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace;word-break:break-all;line-height:1.45;margin:1.5em 0px;padding:1em;border:none;font-size:0.93em;max-height:35em;position:relative;background:url(https://static.segmentfault.com/v-5b8f9b7e/global/css/../img/blueprint.png) 0% 0% / 30px rgb(246, 246, 246), 0% 0% / 30px;overflow:auto;margin-top:0px;"><code style="box-sizing:border-box;font-family:&quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace;padding:0px;color:inherit;border-radius:0px;font-size:1em;white-space:inherit;background:none;overflow-wrap:normal;">
        <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">try</span> {

            <span style="box-sizing:border-box;font-style:italic;color:rgb(153, 153, 136);">//初始化JNDI容器</span>
            Context initCtx = <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">new</span> InitialContext();

            <span style="box-sizing:border-box;font-style:italic;color:rgb(153, 153, 136);">//获取到JNDI容器</span>
            Context envCtx = (Context) initCtx.lookup(<span style="box-sizing:border-box;color:rgb(221, 17, 68);">&quot;java:comp/env&quot;</span>);

            <span style="box-sizing:border-box;font-style:italic;color:rgb(153, 153, 136);">//扫描以jdbc/EmployeeDB名字绑定在JNDI容器下的连接池</span>
            DataSource ds = (DataSource)
                    envCtx.lookup(<span style="box-sizing:border-box;color:rgb(221, 17, 68);">&quot;jdbc/EmployeeDB&quot;</span>);

            Connection conn = ds.getConnection();
            System.out.println(conn);

        } 
</code></pre>
<h2 style="box-sizing:border-box;font-family:inherit;font-weight:500;color:inherit;line-height:1.5em;font-size:1.75em;margin:1.5em 0px 0px;border-bottom:1px solid rgb(238, 238, 238);padding-bottom:10px;">Apache的DBCP是什么？</h2>
<blockquote style="box-sizing:border-box;padding:10px 20px;margin:1.5em 0px;font-size:1em;border-left:2px solid rgb(0, 154, 97);background:rgb(246, 246, 246);color:rgb(85, 85, 85);"><span style="font-size:1em;color:rgb(85, 85, 85);"></span>Apache的DBCP是什么<span style="font-size:1em;color:rgb(85, 85, 85);"></span></blockquote>
<p style="box-sizing:border-box;margin:1.5em 0px;">如果用DataSource来获取连接的话，<strong style="box-sizing:border-box;font-weight:bold;">通常获取连接的代码和驱动特定的DataSource是紧耦合的</strong>。另外，除了选择DataSource的实现类，剩下的代码基本都是一样的。</p>
<p style="box-sizing:border-box;margin:1.5em 0px;">Apache的DBCP就是用来解决这些问题的，它提供的DataSource实现成为了应用程序和不同JDBC驱动间的一个抽象层。<strong style="box-sizing:border-box;font-weight:bold;">Apache的DBCP库依赖commons-pool库，所以要确保它们都在部署路径下。</strong></p>
<p style="box-sizing:border-box;margin:1.5em 0px;">使用DBCP数据源的步骤：</p>
<ol style="box-sizing:border-box;margin:1.5em 0px;padding-left:0px;margin-left:3em;">
<li style="box-sizing:border-box;margin:0.3em 0px;">导入两个jar包【Commons-dbcp.jar和Commons-pool.jar】</li>
<li style="box-sizing:border-box;margin:0.3em 0px;">读取配置文件</li>
<li style="box-sizing:border-box;margin:0.3em 0px;">获取BasicDataSourceFactory对象</li>
<li style="box-sizing:border-box;margin:0.3em 0px;">创建DataSource对象</li>
</ol>
<pre style="word-wrap:break-word;overflow-x:auto;border-radius:4px;box-sizing:border-box;display:block;color:rgb(51, 51, 51);font-family:&quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace;word-break:break-all;line-height:1.45;margin:1.5em 0px;padding:1em;border:none;font-size:0.93em;max-height:35em;position:relative;background:url(https://static.segmentfault.com/v-5b8f9b7e/global/css/../img/blueprint.png) 0% 0% / 30px rgb(246, 246, 246), 0% 0% / 30px;overflow:auto;margin-top:0px;"><code style="box-sizing:border-box;font-family:&quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace;padding:0px;color:inherit;border-radius:0px;font-size:1em;white-space:inherit;background:none;overflow-wrap:normal;">
    <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">private</span> <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">static</span> DataSource dataSource = <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">null</span>;

    <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">static</span> {
        <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">try</span> {
            <span style="box-sizing:border-box;font-style:italic;color:rgb(153, 153, 136);">//读取配置文件</span>
            InputStream inputStream = Demo3.class.getClassLoader().getResourceAsStream(<span style="box-sizing:border-box;color:rgb(221, 17, 68);">&quot;dbcpconfig.properties&quot;</span>);
            Properties properties = <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">new</span> Properties();
            properties.load(inputStream);

            <span style="box-sizing:border-box;font-style:italic;color:rgb(153, 153, 136);">//获取工厂对象</span>
            BasicDataSourceFactory basicDataSourceFactory = <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">new</span> BasicDataSourceFactory();
            dataSource = basicDataSourceFactory.createDataSource(properties);

        } <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">catch</span> (IOException e) {
            e.printStackTrace();
        } <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">catch</span> (Exception e) {
            e.printStackTrace();
        }
    }

    <span style="box-sizing:border-box;"><span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">public</span> <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">static</span> Connection <span style="box-sizing:border-box;color:rgb(153, 0, 0);font-weight:bold;">getConnection</span><span style="box-sizing:border-box;">()</span> <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">throws</span> SQLException </span>{
        <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">return</span> dataSource.getConnection();

    }

    <span style="box-sizing:border-box;font-style:italic;color:rgb(153, 153, 136);">//这里释放资源不是把数据库的物理连接释放了，是把连接归还给连接池【连接池的Connection内部自己做好了】</span>
    <span style="box-sizing:border-box;"><span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">public</span> <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">static</span> <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">void</span> <span style="box-sizing:border-box;color:rgb(153, 0, 0);font-weight:bold;">release</span><span style="box-sizing:border-box;">(Connection conn, Statement st, ResultSet rs)</span> </span>{

        <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">if</span> (rs != <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">null</span>) {
            <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">try</span> {
                rs.close();
            } <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">catch</span> (Exception e) {
                e.printStackTrace();
            }
            rs = <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">null</span>;
        }
        <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">if</span> (st != <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">null</span>) {
            <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">try</span> {
                st.close();
            } <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">catch</span> (Exception e) {
                e.printStackTrace();
            }

        }
        <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">if</span> (conn != <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">null</span>) {
            <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">try</span> {
                conn.close();
            } <span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">catch</span> (Exception e) {
                e.printStackTrace();
            }

        }


    }

</code></pre>
<h2 style="box-sizing:border-box;font-family:inherit;font-weight:500;color:inherit;line-height:1.5em;font-size:1.75em;margin:1.5em 0px 0px;border-bottom:1px solid rgb(238, 238, 238);padding-bottom:10px;">常见的JDBC异常有哪些？</h2>
<blockquote style="box-sizing:border-box;padding:10px 20px;margin:1.5em 0px;font-size:1em;border-left:2px solid rgb(0, 154, 97);background:rgb(246, 246, 246);color:rgb(85, 85, 85);"><span style="font-size:1em;color:rgb(85, 85, 85);"></span>常见的JDBC异常有哪些？<span style="font-size:1em;color:rgb(85, 85, 85);"></span></blockquote>
<p style="box-sizing:border-box;margin:1.5em 0px;">有以下这些：</p>
<ul style="box-sizing:border-box;margin:1.5em 0px;padding-left:0px;margin-left:3em;">
<li style="box-sizing:border-box;margin:0.3em 0px;">java.sql.SQLException——这是JDBC异常的基类。</li>
<li style="box-sizing:border-box;margin:0.3em 0px;">java.sql.BatchUpdateException——当批处理操作执行失败的时候可能会抛出这个异常。这取决于具体的JDBC驱动的实现，它也可能直接抛出基类异常java.sql.SQLException。</li>
<li style="box-sizing:border-box;margin:0.3em 0px;">java.sql.SQLWarning——SQL操作出现的警告信息。</li>
<li style="box-sizing:border-box;margin:0.3em 0px;">java.sql.DataTruncation——字段值由于某些非正常原因被截断了（不是因为超过对应字段类型的长度限制）。</li>
</ul>
<h2 style="box-sizing:border-box;font-family:inherit;font-weight:500;color:inherit;line-height:1.5em;font-size:1.75em;margin:1.5em 0px 0px;border-bottom:1px solid rgb(238, 238, 238);padding-bottom:10px;">JDBC中存在哪些不同类型的锁？</h2>
<blockquote style="box-sizing:border-box;padding:10px 20px;margin:1.5em 0px;font-size:1em;border-left:2px solid rgb(0, 154, 97);background:rgb(246, 246, 246);color:rgb(85, 85, 85);"><span style="font-size:1em;color:rgb(85, 85, 85);"></span>JDBC中存在哪些不同类型的锁?<span style="font-size:1em;color:rgb(85, 85, 85);"></span></blockquote>
<p style="box-sizing:border-box;margin:1.5em 0px;">从广义上讲，有两种锁机制来防止多个用户同时操作引起的数据损坏。</p>
<ul style="box-sizing:border-box;margin:1.5em 0px;padding-left:0px;margin-left:3em;">
<li style="box-sizing:border-box;margin:0.3em 0px;">
<strong style="box-sizing:border-box;font-weight:bold;">乐观锁——只有当更新数据的时候才会锁定记录</strong>。</li>
<li style="box-sizing:border-box;margin:0.3em 0px;"><strong style="box-sizing:border-box;font-weight:bold;">悲观锁——从查询到更新和提交整个过程都会对数据记录进行加锁。</strong></li>
</ul>
<h2 style="box-sizing:border-box;font-family:inherit;font-weight:500;color:inherit;line-height:1.5em;font-size:1.75em;margin:1.5em 0px 0px;border-bottom:1px solid rgb(238, 238, 238);padding-bottom:10px;">java.util.Date和java.sql.Date有什么区别？</h2>
<blockquote style="box-sizing:border-box;padding:10px 20px;margin:1.5em 0px;font-size:1em;border-left:2px solid rgb(0, 154, 97);background:rgb(246, 246, 246);color:rgb(85, 85, 85);"><span style="font-size:1em;color:rgb(85, 85, 85);"></span>java.util.Date和java.sql.Date有什么区别？<span style="font-size:1em;color:rgb(85, 85, 85);"></span></blockquote>
<p style="box-sizing:border-box;margin:1.5em 0px;">java.util.Date包含日期和时间，而java.sql.Date只包含日期信息，而没有具体的时间信息。<strong style="box-sizing:border-box;font-weight:bold;">如果你想把时间信息存储在数据库里，可以考虑使用Timestamp或者DateTime字段</strong></p>
<h2 style="box-sizing:border-box;font-family:inherit;font-weight:500;color:inherit;line-height:1.5em;font-size:1.75em;margin:1.5em 0px 0px;border-bottom:1px solid rgb(238, 238, 238);padding-bottom:10px;">SQLWarning是什么，在程序中如何获取SQLWarning？</h2>
<blockquote style="box-sizing:border-box;padding:10px 20px;margin:1.5em 0px;font-size:1em;border-left:2px solid rgb(0, 154, 97);background:rgb(246, 246, 246);color:rgb(85, 85, 85);"><span style="font-size:1em;color:rgb(85, 85, 85);"></span>SQLWarning是什么，在程序中如何获取SQLWarning？<span style="font-size:1em;color:rgb(85, 85, 85);"></span></blockquote>
<p style="box-sizing:border-box;margin:1.5em 0px;">SQLWarning是SQLException的子类，<strong style="box-sizing:border-box;font-weight:bold;">通过Connection, Statement, Result的getWarnings方法都可以获取到它</strong>。 SQLWarning不会中断查询语句的执行，只是用来提示用户存在相关的警告信息。</p>
<h2 style="box-sizing:border-box;font-family:inherit;font-weight:500;color:inherit;line-height:1.5em;font-size:1.75em;margin:1.5em 0px 0px;border-bottom:1px solid rgb(238, 238, 238);padding-bottom:10px;">如果java.sql.SQLException: No suitable driver found该怎么办？</h2>
<blockquote style="box-sizing:border-box;padding:10px 20px;margin:1.5em 0px;font-size:1em;border-left:2px solid rgb(0, 154, 97);background:rgb(246, 246, 246);color:rgb(85, 85, 85);"><span style="font-size:1em;color:rgb(85, 85, 85);"></span>如果java.sql.SQLException: No suitable driver found该怎么办？<span style="font-size:1em;color:rgb(85, 85, 85);"></span></blockquote>
<p style="box-sizing:border-box;margin:1.5em 0px;">如果你的SQL URL串格式不正确的话，就会抛出这样的异常。不管是使用DriverManager还是JNDI数据源来创建连接都有可能抛出这种异常。它的异常栈看起来会像下面这样。</p>
<pre style="word-wrap:break-word;overflow-x:auto;border-radius:4px;box-sizing:border-box;display:block;color:rgb(51, 51, 51);font-family:&quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace;word-break:break-all;line-height:1.45;margin:1.5em 0px;padding:1em;border:none;font-size:0.93em;max-height:35em;position:relative;background:url(https://static.segmentfault.com/v-5b8f9b7e/global/css/../img/blueprint.png) 0% 0% / 30px rgb(246, 246, 246), 0% 0% / 30px;overflow:auto;margin-top:0px;"><code style="box-sizing:border-box;font-family:&quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace;padding:0px;color:inherit;border-radius:0px;font-size:1em;white-space:inherit;background:none;overflow-wrap:normal;">

org.apache.tomcat.dbcp.dbcp.SQLNestedException: Cannot create JDBC driver of <span style="box-sizing:border-box;"><span style="box-sizing:border-box;color:rgb(51, 51, 51);font-weight:bold;">class</span> '<span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">com</span>.<span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">mysql</span>.<span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">jdbc</span>.<span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">Driver</span>' <span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">for</span> <span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">connect</span> <span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">URL</span> ''<span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">jdbc</span>:<span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">mysql</span>://<span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">localhost</span>:3306/<span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">UserDB</span>'
    <span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">at</span> <span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">org</span>.<span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">apache</span>.<span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">tomcat</span>.<span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">dbcp</span>.<span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">dbcp</span>.<span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">BasicDataSource</span>.<span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">createConnectionFactory</span>(<span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">BasicDataSource</span>.<span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">java</span>:1452)
    <span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">at</span> <span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">org</span>.<span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">apache</span>.<span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">tomcat</span>.<span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">dbcp</span>.<span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">dbcp</span>.<span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">BasicDataSource</span>.<span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">createDataSource</span>(<span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">BasicDataSource</span>.<span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">java</span>:1371)
    <span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">at</span> <span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">org</span>.<span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">apache</span>.<span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">tomcat</span>.<span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">dbcp</span>.<span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">dbcp</span>.<span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">BasicDataSource</span>.<span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">getConnection</span>(<span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">BasicDataSource</span>.<span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">java</span>:1044)
<span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">java</span>.<span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">sql</span>.<span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">SQLException</span>: <span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">No</span> <span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">suitable</span> <span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">driver</span> <span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">found</span> <span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">for</span> '<span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">jdbc</span>:<span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">mysql</span>://<span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">localhost</span>:3306/<span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">UserDB</span>
    <span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">at</span> <span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">java</span>.<span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">sql</span>.<span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">DriverManager</span>.<span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">getConnection</span>(<span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">DriverManager</span>.<span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">java</span>:604)
    <span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">at</span> <span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">java</span>.<span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">sql</span>.<span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">DriverManager</span>.<span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">getConnection</span>(<span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">DriverManager</span>.<span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">java</span>:221)
    <span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">at</span> <span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">com</span>.<span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">journaldev</span>.<span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">jdbc</span>.<span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">DBConnection</span>.<span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">getConnection</span>(<span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">DBConnection</span>.<span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">java</span>:24)
    <span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">at</span> <span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">com</span>.<span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">journaldev</span>.<span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">jdbc</span>.<span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">DBConnectionTest</span>.<span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">main</span>(<span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">DBConnectionTest</span>.<span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">java</span>:15)
<span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">Exception</span> <span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">in</span> <span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">thread</span> &quot;<span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">main</span>&quot; <span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">java</span>.<span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">lang</span>.<span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">NullPointerException</span>
    <span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">at</span> <span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">com</span>.<span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">journaldev</span>.<span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">jdbc</span>.<span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">DBConnectionTest</span>.<span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">main</span>(<span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">DBConnectionTest</span>.<span style="box-sizing:border-box;color:rgb(68, 85, 136);font-weight:bold;">java</span>:16)</span></code></pre>
<p style="box-sizing:border-box;margin:1.5em 0px;">解决这类问题的方法就是，检查下日志文件，像上面的这个日志中，URL串是'jdbc:mysql://localhost:3306/UserDB，只要把它改成jdbc:mysql://localhost:3306/UserDB就好了。</p>
<h2 style="box-sizing:border-box;font-family:inherit;font-weight:500;color:inherit;line-height:1.5em;font-size:1.75em;margin:1.5em 0px 0px;border-bottom:1px solid rgb(238, 238, 238);padding-bottom:10px;">JDBC的RowSet是什么，有哪些不同的RowSet？</h2>
<blockquote style="box-sizing:border-box;padding:10px 20px;margin:1.5em 0px;font-size:1em;border-left:2px solid rgb(0, 154, 97);background:rgb(246, 246, 246);color:rgb(85, 85, 85);"><span style="font-size:1em;color:rgb(85, 85, 85);"></span>JDBC的RowSet是什么，有哪些不同的RowSet？<span style="font-size:1em;color:rgb(85, 85, 85);"></span></blockquote>
<p style="box-sizing:border-box;margin:1.5em 0px;">RowSet用于存储查询的数据结果，和ResultSet相比，<strong style="box-sizing:border-box;font-weight:bold;">它更具灵活性。RowSet继承自ResultSet，因此ResultSet能干的，它们也能，而ResultSet做不到的，它们还是可以</strong>。RowSet接口定义在javax.sql包里。</p>
<p style="box-sizing:border-box;margin:1.5em 0px;">RowSet提供的额外的特性有：</p>
<ul style="box-sizing:border-box;margin:1.5em 0px;padding-left:0px;margin-left:3em;">
<li style="box-sizing:border-box;margin:0.3em 0px;">提供了Java Bean的功能，可以通过settter和getter方法来设置和获取属性。RowSet使用了JavaBean的事件驱动模型，它可以给注册的组件发送事件通知，比如游标的移动，行的增删改，以及RowSet内容的修改等。</li>
<li style="box-sizing:border-box;margin:0.3em 0px;">RowSet对象默认是<strong style="box-sizing:border-box;font-weight:bold;">可滚动，可更新的，因此如果数据库系统不支持ResultSet实现类似的功能，可以使用RowSet来实现</strong>。</li>
</ul>
<p style="box-sizing:border-box;margin:1.5em 0px;">RowSet分为两大类：</p>
<ul style="box-sizing:border-box;margin:1.5em 0px;padding-left:0px;margin-left:3em;">
<li style="box-sizing:border-box;margin:0.3em 0px;">A. <strong style="box-sizing:border-box;font-weight:bold;">连接型RowSet——这类对象与数据库进行连接</strong>，和ResultSet很类似。JDBC接口只提供了一种连接型RowSet，javax.sql.rowset.JdbcRowSet，它的标准实现是com.sun.rowset.JdbcRowSetImpl。</li>
<li style="box-sizing:border-box;margin:0.3em 0px;">
<p style="box-sizing:border-box;margin:0px;margin-top:0px;">B. <strong style="box-sizing:border-box;font-weight:bold;">离线型RowSet——这类对象不需要和数据库进行连接，因此它们更轻量级，更容易序列化。它们适用于在网络间传递数据</strong>。</p>
<ul style="box-sizing:border-box;margin:1.5em 0px;padding-left:0px;margin-left:3em;margin-top:0px;margin-bottom:0px;"><li style="box-sizing:border-box;margin:0.3em 0px;">
<p style="box-sizing:border-box;margin:0px;margin-top:0px;">有四种不同的离线型RowSet的实现。</p>
<ul style="box-sizing:border-box;margin:1.5em 0px;padding-left:0px;margin-left:3em;margin-top:0px;margin-bottom:0px;">
<li style="box-sizing:border-box;margin:0.3em 0px;">CachedRowSet——可以通过他们获取连接，执行查询并读取ResultSet的数据到RowSet里。我们可以在离线时对数据进行维护和更新，然后重新连接到数据库里，并回写改动的数据。</li>
<li style="box-sizing:border-box;margin:0.3em 0px;">WebRowSet继承自CachedRowSet——他可以读写XML文档。</li>
<li style="box-sizing:border-box;margin:0.3em 0px;">JoinRowSet继承自WebRowSet——它不用连接数据库就可以执行SQL的join操作。</li>
<li style="box-sizing:border-box;margin:0.3em 0px;">FilteredRowSet继承自WebRowSet——我们可以用它来设置过滤规则，这样只有选中的数据才可见。</li>
</ul>
</li></ul>
</li>
</ul>
<h2 style="box-sizing:border-box;font-family:inherit;font-weight:500;color:inherit;line-height:1.5em;font-size:1.75em;margin:1.5em 0px 0px;border-bottom:1px solid rgb(238, 238, 238);padding-bottom:10px;">　什么是JDBC的最佳实践？</h2>
<blockquote style="box-sizing:border-box;padding:10px 20px;margin:1.5em 0px;font-size:1em;border-left:2px solid rgb(0, 154, 97);background:rgb(246, 246, 246);color:rgb(85, 85, 85);"><span style="font-size:1em;color:rgb(85, 85, 85);"></span>　什么是JDBC的最佳实践？<span style="font-size:1em;color:rgb(85, 85, 85);"></span></blockquote>
<ul style="box-sizing:border-box;margin:1.5em 0px;padding-left:0px;margin-left:3em;">
<li style="box-sizing:border-box;margin:0.3em 0px;">数据库资源是非常昂贵的，<strong style="box-sizing:border-box;font-weight:bold;">用完了应该尽快关闭它</strong>。Connection, Statement, ResultSet等JDBC对象都有close方法，调用它就好了。</li>
<li style="box-sizing:border-box;margin:0.3em 0px;">
<strong style="box-sizing:border-box;font-weight:bold;">养成在代码中显式关闭掉ResultSet，Statement，Connection的习惯</strong>，如果你用的是连接池的话，连接用完后会放回池里，但是没有关闭的ResultSet和Statement就会造成资源泄漏了。</li>
<li style="box-sizing:border-box;margin:0.3em 0px;">在finally块中关闭资源，保证即便出了异常也能正常关闭。</li>
<li style="box-sizing:border-box;margin:0.3em 0px;">
<strong style="box-sizing:border-box;font-weight:bold;">大量类似的查询应当使用批处理完成</strong>。</li>
<li style="box-sizing:border-box;margin:0.3em 0px;"><strong style="box-sizing:border-box;font-weight:bold;">尽量使用PreparedStatement而不是Statement，以避免SQL注入，同时还能通过预编译和缓存机制提升执行的效率。</strong></li>
<li style="box-sizing:border-box;margin:0.3em 0px;">如果你要将大量数据读入到ResultSet中，<strong style="box-sizing:border-box;font-weight:bold;">应该合理的设置fetchSize以便提升性能</strong>。</li>
<li style="box-sizing:border-box;margin:0.3em 0px;">你用的数据库可能没有支持所有的隔离级别，用之前先仔细确认下。</li>
<li style="box-sizing:border-box;margin:0.3em 0px;">数据库隔离级别越高性能越差，确保你的数据库连接设置的隔离级别是最优的。</li>
<li style="box-sizing:border-box;margin:0.3em 0px;">如果在WEB程序中创建数据库连接，最好通过JNDI使用JDBC的数据源，这样可以对连接进行重用。</li>
<li style="box-sizing:border-box;margin:0.3em 0px;"><strong style="box-sizing:border-box;font-weight:bold;">如果你需要长时间对ResultSet进行操作的话，尽量使用离线的RowSet。</strong></li>
</ul>
<blockquote style="box-sizing:border-box;padding:10px 20px;margin:1.5em 0px;font-size:1em;border-left:2px solid rgb(0, 154, 97);background:rgb(246, 246, 246);color:rgb(85, 85, 85);"><span style="font-size:1em;color:rgb(85, 85, 85);"></span>如果文章有错的地方欢迎指正，大家互相交流。习惯在微信看技术文章的同学，<strong style="box-sizing:border-box;font-weight:bold;">可以关注微信公众号:Java3y</strong>
<span style="font-size:1em;color:rgb(85, 85, 85);"></span></blockquote>

                <span style="line-height:1.6;font-size:15px;font-family:-apple-system, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Source Han Sans SC&quot;, &quot;Noto Sans CJK SC&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif;display:table;clear:both;"> </span></div></div></div></div></div></div></div></div>
</div>
</span>
</div></body></html> 